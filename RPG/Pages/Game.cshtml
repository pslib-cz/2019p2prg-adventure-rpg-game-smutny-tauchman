@page
@model RPG.Pages.Game
@{ ViewData["Title"] = "setKeyLocation";
}

<!--
<p>@Model.index</p>
<p>@Model._ss.getKeyLocation()</p>
<p>@Model._ss.getGameState().HP</p>

@for (int i = 0; i < Model._lo.Rooms.Count; i++)
{
<p> @Model._lo.Rooms[i].id - @Model._lo.Rooms[i].raided - @Model._lo.Rooms[i].containsEnemy</p>
}
-->

<label for="file">HP:</label>
<progress id="file" max="100" value="@Model._ss.getGameState().HP">@Model._ss.getGameState().HP</progress>

@if(Model.index == 14 && Model.key == true)
{
<p>Odemykáš dveře, ez (s)klep.</p>
}
@{
    else
    {
    <p>@Model._lo.Rooms[Model.index].description</p>
    @if(Model.index == Model._ss.getKeyLocation() && Model._lo.Rooms[Model.index].raided == false)
    {
    <p>Našel jsi klíč, tak ty jdeš fakt že jdeš.</p>
    Model.key = true;
    }


    <form method="post">
        @for (int i = 0; i < @Model._lo.Rooms[Model.index].rooms.Length; i++)
        {
        <div class="form-check">
            <input type="hidden" asp-for="@Model.key" value="@Model.key" />
            <label class="form-check-label" asp-for="@Model.index">
                <button type="submit" name="index" value="@Model._lo.Rooms[Model._lo.Rooms[Model.index].rooms[i]].id">@Model._lo.Rooms[Model._lo.Rooms[Model.index].rooms[i]].button</button>
            </label>
        </div>
        }
    </form>

    }
    @if (Model._ss.getEnemyArray()[Model.index] == true && Model._lo.Rooms[Model.index].raided == false)
    {
    <img src="~/img/jumpscare.jpg" class="animated fadeOut jumpscare animated.delay-3s">
    <audio autoplay>
        <source src="~/audio/jumpscare.mp3" type="audio/mp3">
    </audio>
    }
}
